/* Modern Dashboard Styles (enhanced professional design) */

/* Base Theme System */
:root {
  color-scheme: light;
  
  /* Base Colors */
  --primary: #5e72e4;
  --primary-rgb: 94, 114, 228;
  --primary-600: #4557c9;
  --success: #2dce89;
  --info: #11cdef;
  --warning: #fb6340;
  --danger: #f5365c;
  --purple: #8965e0;
  
  /* Theme Colors - Light Mode Default */
  --bg: #f6f8fb;
  --card: #ffffff;
  --text: #344767;
  --text-muted: #6c757d;
  --border: #eef2f7;
  --glass: rgba(255,255,255,0.6);
  
  /* Grays */
  --gray-100: #f8f9fa;
  --gray-200: #e9ecef;
  --gray-300: #dee2e6;
  --gray-400: #ced4da;
  --gray-500: #adb5bd;
  --gray-600: #6c757d;
  --gray-700: #495057;
  --gray-800: #343a40;
  --gray-900: #212529;
  
  /* UI Elements */
  --radius-sm: 0.375rem;
  --radius-md: 0.6rem;
  --shadow-sm: 0 6px 18px rgba(43,54,82,0.06);
  --shadow-md: 0 10px 30px rgba(43,54,82,0.08);
}

/* Dark Mode Theme */
:root[data-theme="dark"] {
  color-scheme: dark;
  
  /* Override Theme Colors */
  --bg: #1a1f2e;
  --card: #242837;
  --text: #e9ecef;
  --text-muted: #adb5bd;
  --border: #2d3447;
  --glass: rgba(0,0,0,0.6);
  
  /* Override Grays */
  --gray-100: #212529;
  --gray-200: #343a40;
  --gray-300: #495057;
  --gray-400: #6c757d;
  --gray-500: #adb5bd;
  --gray-600: #adb5bd;
  --gray-700: #e9ecef;
  --gray-800: #f8f9fa;
  --gray-900: #ffffff;
  
  /* Override Shadows */
  --shadow-sm: 0 6px 18px rgba(0,0,0,0.2);
  --shadow-md: 0 10px 30px rgba(0,0,0,0.25);
}

/* Base Styles */
html {
  transition: background-color 0.3s ease;
}

body {
  background-color: var(--bg);
  color: var(--text);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Dark Mode Base Overrides */
:root[data-theme="dark"] body {
  background-color: var(--bg);
  color: var(--text);
}

:root[data-theme="dark"] .card {
  background-color: var(--card);
  border-color: var(--border);
}

:root[data-theme="dark"] .table {
  color: var(--text);
}

:root[data-theme="dark"] .table-light {
  background-color: var(--gray-100) !important;
  color: var(--text);
}

:root[data-theme="dark"] .navbar-modern {
  background: linear-gradient(135deg, #2d3748, #1a202c);
}

:root[data-theme="dark"] .dropdown-menu {
  background-color: var(--card);
  border-color: var(--border);
}

:root[data-theme="dark"] .dropdown-item {
  color: var(--text);
}

:root[data-theme="dark"] .dropdown-item:hover {
  background-color: var(--gray-100);
}

:root[data-theme="dark"] .form-control,
:root[data-theme="dark"] .form-select {
  background-color: var(--gray-100);
  border-color: var(--border);
  color: var(--text);
}

:root[data-theme="dark"] .text-muted {
  color: var(--text-muted) !important;
}

/* Page container */
.dashboard-container {
  max-width: 1300px;
  margin: 0 auto;
  padding: clamp(1rem, 3vw, 2rem);
}

/* Typography helpers */
body { background: var(--bg); color: #243143; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
.muted { color: var(--muted); }

/* Cards */
.card { background: var(--card); border-radius: var(--radius-md); border: 0; box-shadow: var(--shadow-sm); transition: transform .18s ease, box-shadow .18s ease; }
.card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
.card-body { padding: 1.25rem; }
.card-header { background: transparent; border-bottom: 1px solid #eef2f7; padding: 1rem 1.25rem; }

/* Utility spacing */
.gap-2x { gap: .75rem; }
.text-sm { font-size: .9rem; }
.fw-600 { font-weight: 600; }

/* Stats grid */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; margin-bottom: 1rem; }
.stats-card { padding: 1rem 1rem; border-radius: var(--radius-md); position: relative; overflow: hidden; }
.stats-icon { width:44px; height:44px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; background:linear-gradient(135deg, rgba(94,114,228,0.12), rgba(69,87,201,0.08)); color:var(--primary); font-size:1.25rem; }
.stat-value { font-size:1.6rem; font-weight:700; }
.stat-label { color:var(--muted); font-size:.85rem; }

/* Tables */
.table-modern { 
    width: 100%; 
    border-collapse: separate; 
    border-spacing: 0; 
    background: transparent; 
}

/* User Table Styles */
.user-table {
    margin-bottom: 0;
    --bs-table-hover-bg: var(--bg);
}

.user-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
    background: white;
}

.user-table thead th {
    background: var(--bg);
    color: var(--muted);
    font-weight: 600;
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    padding: 1rem 1rem;
    border-bottom: 1px solid #eef2f7;
}

.user-table tbody td {
    padding: 1rem;
    vertical-align: middle;
    border-bottom: 1px solid #f1f5fb;
}

.user-table tbody tr:hover {
    background-color: #f8fafd;
}

.user-groups-header {
    background: #f8fafd;
    border-bottom: 1px solid #eef2f7;
}

.schedule-group-title {
    color: var(--primary);
    font-size: 0.8125rem;
    letter-spacing: 0.5px;
}

.search-box .input-group {
    background: var(--bg);
    border-radius: var(--radius-sm);
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.search-box .form-control {
    border-color: #e9ecef;
    font-size: 0.9375rem;
}

.search-box .input-group-text {
    border-color: #e9ecef;
}

.schedule-filter .form-select {
    min-width: 160px;
    border-color: #e9ecef;
    background-color: white;
    font-size: 0.9375rem;
}

.table-modern thead th { 
    background: transparent; 
    color: var(--muted); 
    font-weight: 700; 
    font-size: .78rem; 
    border-bottom: 1px solid #eef2f7; 
    padding: .85rem .9rem; 
    text-transform: uppercase; 
}

.table-modern tbody td { 
    padding: .9rem .9rem; 
    vertical-align: middle; 
    border-top: 1px solid #f1f5fb; 
}

.table-modern tbody tr:hover { 
    background: #fbfdff; 
}

.table-modern .small-muted { 
    color: var(--muted); 
    font-size: .85rem; 
}

/* File/Attachment previews */
.attachment-thumb { max-width:140px; max-height:90px; border-radius:6px; object-fit:cover; border:1px solid #eef4ff; }
.attachment-link { display:inline-flex; align-items:center; gap:.5rem; color:var(--primary-600); text-decoration:none; font-weight:600; }
.attachment-link i { font-size:1.05rem; }

/* Buttons */
.btn-primary { background:var(--primary); border-color:var(--primary); }
.btn-primary:hover { background:var(--primary-600); border-color:var(--primary-600); }
.btn-outline-soft { border:1px solid #e9eef9; background:#fff; color:var(--muted); }

/* Forms */
.form-control { border-radius: .5rem; border:1px solid #e6eef8; padding:.6rem .75rem; }
.form-select { border-radius:.5rem; border:1px solid #e6eef8; }

/* Search box */
.search-container { position:relative; }
.search-container .form-control { padding-left:2.6rem; }
.search-container .bi-search { position:absolute; left:12px; top:50%; transform:translateY(-50%); color:var(--muted); }

/* User Info Box */
.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
    background: transparent;
}

.user-info:hover {
    background: rgba(var(--primary-rgb), 0.04);
}

.user-info:hover {
    background-color: rgba(0,0,0,0.02);
}

.user-meta {
    flex: 1;
    min-width: 0;
}

.user-meta .name {
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 0.125rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-meta .email {
    font-size: 0.875rem;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Avatars */
.user-avatar, .avatar { 
    width: 42px; 
    height: 42px; 
    border-radius: 50%; 
    display: inline-flex; 
    align-items: center; 
    justify-content: center; 
    color: #fff; 
    font-weight: 600; 
    font-size: 1rem;
    text-transform: uppercase; 
    box-shadow: 0 3px 12px rgba(0,0,0,0.08);
    flex-shrink: 0;
}

.user-avatar.sm { 
    width: 32px; 
    height: 32px; 
    font-size: 0.875rem; 
}

/* Avatar status indicators */
.user-avatar.graduated {
    box-shadow: 0 0 0 3px rgba(45,206,137,0.25);
}

.user-avatar.frozen {
    box-shadow: 0 0 0 3px rgba(66,153,225,0.25);
}

/* Badges */
.badge-role { padding:.35rem .6rem; border-radius:.5rem; font-weight:700; font-size:.75rem; }
.badge-role.admin { background: #ffc107; color:#111; }
.badge-role.student { background: #0dcaf0; color:#111; }

/* Teacher Schedule Groups */
.schedule-groups {
    padding: 1.5rem;
}

.schedule-section {
    margin-bottom: 2rem;
}

.schedule-section:last-child {
    margin-bottom: 0;
}

.schedule-header {
    padding: 1rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--gray-200);
}

.schedule-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 1rem;
}

.schedule-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--dark);
    margin-right: 0.5rem;
}

.bg-primary-soft {
    background-color: rgba(var(--primary-rgb), 0.1) !important;
    color: var(--primary) !important;
}

.bg-dark-soft {
    background-color: rgba(52, 71, 103, 0.1) !important;
    color: var(--dark) !important;
}

.bg-purple-soft {
    background-color: rgba(137, 101, 224, 0.1) !important;
    color: var(--purple) !important;
}

.schedule-users {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
    padding: 0 1rem;
}

.user-card {
    display: flex;
    align-items: center;
    padding: 1rem;
    background: white;
    border-radius: var(--radius-sm);
    border: 1px solid var(--gray-200);
    transition: all 0.2s ease;
}

.user-card:hover {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
    transform: translateY(-2px);
}

.user-card .user-avatar {
    width: 45px;
    height: 45px;
    margin-right: 1rem;
    font-size: 1.25rem;
}

.user-card .user-info {
    flex: 1;
    min-width: 0;
}

.user-card .user-name {
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-card .user-email {
    font-size: 0.875rem;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-card .user-badges {
    display: flex;
    gap: 0.5rem;
    margin-left: 1rem;
}

.user-card .badge {
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.35em 0.65em;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Teacher Schedule List */
.teacher-schedule-list {
    margin-top: 1rem;
}

.teacher-schedule-list .list-group {
    border-radius: var(--radius-sm);
    background: transparent;
}

.teacher-schedule-list .list-group-item {
    background: transparent;
    border: none;
    padding: 0.5rem 0;
    margin-bottom: 0.25rem;
    font-size: 0.875rem;
}

.teacher-schedule-list .schedule-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 0.75rem;
}

.teacher-schedule-list .badge {
    font-weight: 600;
    font-size: 0.75rem;
    padding: 0.35em 0.65em;
}

.teacher-schedule-list .d-flex {
    gap: 0.5rem;
}

/* Schedule Badges */
.badge.bg-purple { 
    background-color: var(--purple) !important; 
    color: white !important;
}
.badge.bg-dark { color: white !important; }
.badge.bg-info { background-color: var(--info) !important; }

/* Notifications */
.notification-dot { position:absolute; top:6px; right:6px; transform:translate(25%, -25%); }

/* Modal improvements */
.modal-content { border-radius: .6rem; overflow:hidden; }

/* Responsive tweaks */
@media (max-width: 768px) {
  .stats-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  .user-avatar { width:36px; height:36px; }
}

/* Utilities */
.text-muted-small { color:#98a0b5; font-size:.85rem; }

/* Profile Settings */
.profile-picture-section {
    padding: 2rem 0;
    background: linear-gradient(to bottom, var(--bg), transparent);
    border-radius: var(--radius-sm);
}

.profile-picture-preview {
    width: 150px;
    height: 150px;
    position: relative;
    margin-bottom: 1.5rem;
}

.profile-image {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid white;
    box-shadow: 0 4px 25px rgba(0,0,0,0.1);
}

.profile-avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3.5rem;
    color: white;
    text-transform: uppercase;
    font-weight: 600;
    border: 4px solid white;
    box-shadow: 0 4px 25px rgba(0,0,0,0.1);
}

.profile-form .form-group {
    margin-bottom: 1.5rem;
}

.profile-form .form-label {
    font-weight: 500;
    color: var(--dark);
    margin-bottom: 0.5rem;
}

.profile-form .form-control:disabled {
    background-color: var(--gray-100);
    cursor: not-allowed;
}

.profile-form .btn-outline-primary:hover {
    background-color: var(--primary);
    color: white;
}

/* Theme Support */
body {
    background-color: var(--bg);
    color: var(--text);
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Card Dark Mode Support */
.card {
    background-color: var(--card);
    border-color: var(--border);
}

/* Table Dark Mode Support */
.table {
    color: var(--text);
}

.table-light {
    background-color: var(--gray-100) !important;
}

.table-hover tbody tr:hover {
    background-color: rgba(var(--primary-rgb), 0.05);
}

/* Form Controls Dark Mode */
.form-control, .form-select {
    background-color: var(--card);
    border-color: var(--border);
    color: var(--text);
}

.form-control:disabled,
.form-select:disabled {
    background-color: var(--gray-100);
    color: var(--text-muted);
}

.input-group-text {
    background-color: var(--gray-100);
    border-color: var(--border);
    color: var(--text-muted);
}

/* Theme Switcher */
.theme-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
    margin: 0;
}

.theme-switch input {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
}

.theme-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--gray-300);
    transition: .4s;
    border-radius: 30px;
    box-shadow: inset 0 0 4px rgba(0,0,0,0.1);
}

.theme-slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.theme-switch input:checked + .theme-slider {
    background-color: var(--primary);
}

.theme-switch input:checked + .theme-slider:before {
    transform: translateX(30px);
}

.theme-switch-wrapper {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--card);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    transition: all 0.3s ease;
}

.theme-switch-wrapper .bi-sun {
    color: var(--warning);
    font-size: 1.1rem;
}

.theme-switch-wrapper .bi-moon {
    color: var(--primary);
    font-size: 1.1rem;
}

/* Modal Dark Mode Support */
.modal-content {
    background-color: var(--card);
    border-color: var(--border);
}

.modal-header {
    border-bottom-color: var(--border);
}

.modal-footer {
    border-top-color: var(--border);
}

/* User Avatar Styles */
.user-avatar { 
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
    background-size: cover;
    background-position: center;
}

.user-avatar img.avatar-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.user-avatar.with-border {
    border: 2px solid var(--card);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Avatar sizes */
.user-avatar.avatar-sm {
    width: 32px;
    height: 32px;
    font-size: 0.875rem;
}

.user-avatar.avatar-lg {
    width: 64px;
    height: 64px;
    font-size: 1.5rem;
}

.user-avatar.avatar-xl {
    width: 96px;
    height: 96px;
    font-size: 2rem;
}

/* Print - Reset to Light Theme */
@media print { 
    body { 
        background: #fff !important; 
        color: #000 !important; 
    } 
    .card { 
        box-shadow: none !important; 
        border: 1px solid #eee !important; 
        background: #fff !important;
    } 
}